import matplotlib.pyplot as plt
import numpy as np

# 假设这是你的数据列表
data = [1677072.0, 1650992.5, 1465610.625, 1414822.375, 1381678.5, 1498320.625, 1217335.125, 1801431.75, 2001138.875, 1715301.125, 1440496.375, 843834.75, 1645416.0, 1428081.5, 1006347.3125, 1486104.75, 1354730.5, 1236692.5, 1541998.0, 2064702.5, 2113952.0, 1353253.125, 1769577.0, 995328.0625, 1465008.625, 998235.25, 1525179.375, 1421687.875, 1432113.75, 1155914.0, 939101.5625, 1508980.625, 1157681.875, 1292298.375, 1959278.25, 1159365.625, 1117641.25, 1207516.25, 577894.9375, 540757.5, 1492942.0, 1227476.25, 1579930.0, 1174123.75, 1032112.75, 1690835.0, 1193639.125, 873175.0, 708536.0625, 877308.25, 1277735.875, 1768106.625, 1808310.125, 1083862.375, 963344.25, 1032046.75, 959229.0625, 1091786.25, 1279658.0, 1147699.5, 710311.0, 1351206.375, 1851143.0, 1424046.75, 1305360.625, 1030466.5625, 1197560.0, 1419436.125, 980916.0625, 1144085.0, 1089733.0, 1354566.875, 1049056.25, 1046034.5625, 942253.5, 837006.6875, 1037896.375, 1597613.5, 1091062.625, 1810531.375, 1252983.375, 1200777.5, 1471529.375, 1945785.75, 1109778.0, 1426141.0, 855140.9375, 941299.4375, 1456462.5, 869082.75, 1535053.125, 1166106.25, 1174327.75, 1035189.875, 1049844.375, 947835.0, 1700319.0, 1232393.375, 1181935.125, 1236539.375, 1465377.25, 818818.0625, 1096437.75, 1060953.375, 1544529.625, 1250430.0, 773384.0625, 628994.375, 1232539.125, 1207033.25, 1057812.5, 1065604.25, 1070431.0, 1187401.25, 1301517.375, 1096488.375, 992091.125, 1309272.75, 1033177.0, 1101336.0, 543970.3125, 1082366.125, 1179116.25, 1114457.25, 784112.4375, 1727237.125, 1642318.25, 1197717.625, 1696261.25, 1082213.25, 872919.625, 1434929.25, 1070756.25, 994305.0, 1028233.0625, 943939.25, 1515426.625, 871591.125, 1412466.375, 1216312.75, 1165055.25, 1558396.25, 1614994.0, 1313941.375, 2317669.0, 1149674.125, 1463346.875, 1242707.75, 1224136.75, 1068353.0, 1126229.875, 1186665.875, 1182365.375, 1220055.5, 811357.625, 931988.375, 1382708.0, 1060908.375, 1513616.875, 1843841.875, 1101803.125, 1534211.375, 1166139.25, 1296510.25, 1910380.5, 1291418.0, 1080439.375, 1520760.0, 1671089.25, 1516694.25, 1346140.125, 1201675.25, 1459751.5, 1327800.375, 1403826.25, 1093558.5, 1097086.5, 1374515.375, 823982.875, 1781931.875, 1194463.5, 1286967.75, 1707060.875, 1377351.125, 1191946.0, 1078110.625, 1568248.875, 1381289.75, 1231395.875, 1029093.375, 1223727.375, 1251288.25, 865462.5, 1835287.0, 1041340.375, 1412279.875, 1175323.75, 1544095.25, 996826.0625, 974343.8125, 756575.375, 1102898.0, 1514809.75, 1547594.75, 839969.3125, 1516933.75, 1013015.5, 1375169.75, 834350.0625, 953343.8125, 1227864.0, 1478982.875, 1449604.375, 1471187.625, 896506.75, 651814.625, 1586127.75, 1222919.875, 929013.1875, 1240564.0, 1154756.625, 1238641.375, 1137248.875, 1033887.5625, 834586.625, 1293075.125, 1380556.875, 1278435.25, 1286605.0, 1148508.0, 1259384.875, 960569.125, 1315710.5, 468738.4375, 980355.0, 1082385.125, 1299857.25, 1612588.125, 977631.875, 1286924.25, 1660301.5, 1092248.375, 1179196.75, 1458267.125, 1230672.375, 1104091.125, 1525926.125, 646268.25, 899266.625, 972715.1875, 1739977.125, 1567207.625, 1330241.25, 1212907.25, 970535.3125, 1072526.0, 909947.9375, 1481290.875, 1727706.875, 1390832.625, 1103631.25, 1250068.75, 1321187.125, 757366.25, 1581332.75, 1372971.5, 1839415.0, 654163.5625, 1206568.375, 1013085.5, 1367220.125, 1220837.125, 1178895.75, 1104635.375, 920568.4375, 1204006.25, 1146396.5, 1150388.25, 1068119.5, 1545070.5, 1205874.625, 739922.0, 1269485.625, 1329419.0, 1221058.75, 1121822.0, 1685973.75, 1190815.25, 716869.375, 1785544.25, 1373308.375, 1465989.875, 1258166.25, 1750907.625, 1452868.375, 1614165.875, 1344441.125, 1949345.75, 863420.0, 1091121.0, 1503290.375, 1792105.375, 1257274.375, 862272.5625, 918988.3125, 877767.0625, 970853.1875, 1404907.375, 1394505.875, 1276257.875, 1299786.5, 997236.25, 1170452.125, 1075957.75, 1241065.75]

# 创建一个索引列表，与数据列表相对应
x = list(range(len(data)))
y = []
for i in range(len(data)):
    y.append(np.mean(data[max(0,i-100):i]))

# 创建一个折线图
plt.figure(figsize=(10, 5))  # 可以设置图形大小
plt.plot(x, y, marker='o', linestyle='-', color='b', label='Value')

title_font = {
    'fontsize': 20,
    'fontweight': 'bold'
}

label_font = {
    'fontsize': 18,
    'fontweight': 'bold'
}

# 添加标题和标签
plt.title('Average Loss', fontdict=title_font)
plt.xlabel('Iteration', fontdict=label_font)
plt.ylabel('Value', fontdict=label_font)

# 可以添加网格（可选）
plt.grid(True)

# 添加图例（可选）
plt.legend()

plt.savefig('average_loss.eps', format='eps', dpi=1000)

# 展示图形
plt.show()